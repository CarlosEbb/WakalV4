---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';

import { Image } from 'astro:assets';
import localImageLogin from '../images/fondoLogin.png';
import localImageLogoWakal from '../images/logoWakal.png';

---

<Layout title="Login Soluciones Laser">
   
        <!-- Card central en una rejilla -->
        <div class="grid grid-cols-12 bg-white rounded-lg shadow-lg mx-4 md:mx-16">
            <!-- Sección izquierda con imagen -->
            <div class="col-span-7 w-full h-auto rounded-lg bg-gradient-to-r from-custom-secundary hidden md:block">
				
			</div>
            <!-- Sección derecha con formulario -->
            <div class="col-span-12 md:col-span-5">
                <!-- Imagen -->
				<form class="p-16 mt-8">
					<div class="text-right">
						<img src={localImageLogoWakal.src} alt="Imagen" class="w-60 h-auto mx-auto rounded-lg">
						<span class="text-gray-400 text-min mr-16 text-right">By Soluciones Laser Version 4.0</span>
					</div>
					

					<h2 class="text-center text-lg mb-4 text-custom-primary">Ingresa tu información</h2>
					<div class="mb-4 relative">
						<input type="email" placeholder="Usuario o Correo electrónico" class="w-full px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:border-blue-500 pl-10">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
							<!-- Agrega aquí el código SVG del icono de correo electrónico -->
						</svg>
					</div>
					<div class="mb-4">
						<input type="password" placeholder="Contraseña" class="w-full px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:border-blue-500">
					</div>
					<div class="flex items-center mb-4">
						<input type="checkbox" id="recuerdame" class="mr-2">
						<label for="recuerdame" class="text-left text-min">Recuérdame</label>
						<a href="#" class="ml-auto text-blue-500 text-right text-min">¿Olvidaste tu contraseña?</a>
					</div>
					<button type="submit" class="w-full bg-gradient-to-r from-custom-secundary to-custom-tertiary text-white rounded-full py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mb-4 uppercase ">Ingresar</button>
				</form>
            </div>
        </div>
</Layout>


<script>
	const url = import.meta.env.PUBLIC_BASE_URL;
	import { apiController } from './hola/request.js';
	
	const handleLogin = async (event) => {
		event.preventDefault(); // Evita el envío predeterminado del formulario

		// Obtiene los valores de correo electrónico y contraseña del formulario
		const email = document.getElementById('email').value;
		const password = document.getElementById('password').value;

		const requestBody = {
			email,
			password,
		};
		
		const responseData = await apiController(import.meta.env.PUBLIC_BASE_URL,'/auth/login','POST',requestBody);
		
		if(responseData){
			window.location.href = '/login'; // Ejemplo de redirección
		}
	};
	document.getElementById('fr_login').addEventListener('submit', handleLogin);
	
</script>